<script src="require.js"></script>
<!--<script src="signals.js"></script>
<script src="hasher.js"></script>
<script src="crossroads.js"></script>
<script src="chirimoya.js"></script>-->

<div id="app">
    Loading chirimoya.. Uhm delicious!
</div>

<script>
    require(['chirimoya'], function(chirimoya){
        window.chirimoya = chirimoya; //TODO Self reg
        chirimoya.onBeforeHasAccess = function(View, moduleId){
            return new Promise(function(resolve){
                console.log('waiting 10 secs');
                if(moduleId === 'pages/home/home') return resolve(true);
                setTimeout(function() {
                     resolve(true);
                }, 10000);
            });
        };
        chirimoya.init();
        chirimoya.set('home');
    });
    
</script>
